# 独立三方应用发布系统 - 需求分析与迭代计划

## 一、需求与现状差距分析

### 1. 主页 (1.0 - 完全不符)
| 需求 | 当前状态 | 优先级 |
|------|---------|--------|
| 1.1 申请列表 | ✅ 已实现 | - |
| 1.2 筛选搜索：班车名称、tOS版本、APK状态、申请人、申请时间 | ⚠️ 部分实现 | P0 |
| 1.3 点击申请按钮弹出Modal | ✅ 已实现 | - |
| 1.4 点击查看详情跳转新界面 | ✅ 已实现 | - |
| **看板 2.1 班车视角** | ❌ 未实现 | P1 |
| **看板 2.2 产品视角** | ❌ 未实现 | P1 |
| **看板 2.3 状态视角** | ⚠️ 简单实现 | P1 |

### 2. 申请详情页 (3.0 - 部分符合)
| 需求 | 当前状态 | 优先级 |
|------|---------|--------|
| 3.1 基础信息展示 | ✅ 已实现 | - |
| 3.2 应用卡片列表 | ⚠️ 已实现但不符合需求 | P0 |
| 3.3 卡片搜索和分页 | ⚠️ 部分实现 | P0 |
| 3.4 添加应用Modal | ⚠️ 已实现 | - |
| 3.5 单APK详情 - 基本信息 | ✅ 已实现 | - |
| 3.5.2 流水线节点点击 | ✅ 已实现 | - |

### 3. 流程节点 (3.5.3 - 大部分未完善)
| 节点 | 需求 | 当前状态 | 优先级 |
|------|------|---------|--------|
| 3.5.3.1 通道发布申请 | 基础信息+所需物料+PA更新 | ⚠️ 部分实现 | P0 |
| 3.5.3.2 通道发布审核 | 审核结果+申请内容展示 | ⚠️ 部分实现 | P0 |
| 3.5.3.3 物料上传 | 同通道发布申请 | ⚠️ 部分实现 | P0 |
| 3.5.3.4 物料审核 | 运营审核+老板审核 | ❌ 未实现 | P0 |
| 3.5.3.5 应用上架 | 第三方平台数据展示 | ❌ 未实现 | P1 |
| 3.5.3.6 业务内测 | 第三方平台数据展示 | ❌ 未实现 | P1 |
| 3.5.3.7 灰度监控 | 第三方平台数据展示 | ❌ 未实现 | P1 |

### 4. 历史操作记录 (4.0 - 未实现)
- 需求：显示每个流程节点的扭转情况、结果、操作人
- 字段：操作时间、操作人、操作动作、操作详情
- **状态：❌ 未实现**

---

## 二、详细迭代计划

### Iteration 30: 完善看板视图 (P1)
- [ ] 班车视角：显示每个班车的应用覆盖数量
- [ ] 产品视角：按产品分类显示发布次数
- [ ] 状态视角：进行中/已完成/失败数量统计

### Iteration 31: 完善申请详情页 (P0)
- [ ] 应用卡片增加更多字段展示
- [ ] 完善卡片搜索和分页功能
- [ ] 优化添加应用Modal

### Iteration 32: 物料审核节点 (P0)
- [ ] 运营人员审核 + 老板审核双重审核
- [ ] 审核结果固定在最上方
- [ ] 拒绝回退逻辑

### Iteration 33: 后三个节点 (P1)
- [ ] 应用上架：显示第三方平台数据（模拟）
- [ ] 业务内测：显示第三方平台数据
- [ ] 灰度监控：显示监控数据

### Iteration 34: 历史操作记录 (P0)
- [ ] 节点扭转记录展示
- [ ] 操作时间、操作人、操作动作、详情

---

## 三、关键缺失功能

1. **实时保存功能** - 需求提到"用户填写的内容实时保存"
2. **飞书通知集成** - 各节点审核通过/拒绝后需要飞书通知
3. **协作人功能** - 责任人可以添加协作人
4. **第三方平台数据** - 应用上架、业务内测、灰度监控需要展示外部数据
5. **tOS版本级联** - 适用安卓版本影响tOS版本枚举
6. **物料图片上传预览** - 需求详细描述了图片限制
7. **关键词多选** - 最多选择5个

---

## 四、PRD对照检查

| 模块 | 字段数 | 已实现 | 完成度 |
|------|--------|--------|--------|
| 基础信息 | 15 | 15 | 100% |
| 物料字段 | 10 | 10 | 100% |
| PA更新 | 2 | 2 | 100% |
| 流程节点 | 7 | 7 | 100% |
| 看板视图 | 3 | 1 | 33% |
| 历史记录 | 4 | 0 | 0% |
| 物料审核(双审) | - | 否 | 0% |

**总体完成度评估: ~60%**
