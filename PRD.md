# 独立三方应用发布系统 - 产品需求文档 (PRD)

## 1. 项目概述

**项目名称**: 独立三方应用发布系统  
**项目类型**: 企业级Web应用 (React + Node.js)  
**核心理念**: 自动化管理独立第三方应用的发布流程，支持多节点审批、物料管理和灰度发布

**参考Demo**: https://service-622072057003.us-west1.run.app/

---

## 2. 功能架构

### 2.1 主页面 (Home)

#### 2.1.1 独立三方应用发布流程申请列表
- **筛选/搜索字段**:
  - 班车名称 (班车 时间戳格式)
  - tOS版本 (如 tOS 16.1.0)
  - APK状态 (成功✅绿色 / 拒绝❌红色 / 进行中🔵蓝色 / 总数黑色)
  - 申请人
  - 申请时间
- **操作**: 查看详情
- **申请按钮**: 弹出Modal填写班车信息，创建流程单

#### 2.1.2 待办 (TODO)
- **卡片展示**: 班车名称、应用名称、流程节点、节点状态、处理人
- **操作按钮**: 去处理
- **拒绝原因**: 回退时显示

#### 2.1.3 看板 (Kanban)
- **班车视角**: 班车 → 覆盖产品列表
- **产品视角**: 产品 → 发布次数
- **状态视角**: 进行中/已完成数量

---

### 2.2 流程单详情页

#### 2.2.1 基础信息
- 班车信息、申请人、申请时间等

#### 2.2.2 应用卡片列表
- 应用图标、名称、包名、类型、版本号
- 流程节点、节点状态、操作人、拒绝原因
- 支持搜索和分页
- 添加应用功能

---

### 2.3 单APK发布流程详情

#### 2.3.1 基本信息
- 应用图标、名称、包名、版本号
- 状态: 进行中(蓝) / 已完成(绿) / 失败(红)

#### 2.3.2 流水线 (7大节点)
1. **通道发布申请** - 申请人填写申请信息
2. **通道发布审核** - 审核通过/拒绝
3. **物料上传** - 上传应用素材
4. **物料审核** - 运营+老板双重审核
5. **应用上架** - 展示第三方平台数据
6. **业务内测** - 第三方平台数据展示
7. **灰度监控** - 监控数据展示

#### 2.3.3 历史操作记录
- 操作时间、操作人、操作动作、详情

---

## 3. 详细字段定义

### 3.1 通道发布申请/物料上传字段

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| 应用名称 | 文本 | 是 | 自动带出，不可编辑 |
| 应用包名 | 文本 | 是 | 自动带出，不可编辑 |
| 应用类型 | 下拉单选 | 是 | 自动带出 |
| 应用版本号 | 下拉单选 | 是 | 可搜索 |
| 应用APK | 下拉选择 | 是 | 带出制品地址 |
| 应用测试PASS报告 | 附件上传 | 是 | |
| 应用分类 | 下拉单选 | 是 | Travel & Local, Shopping... |
| 系统应用 | radio | 是 | 是/否 |
| 发布国家 | 多级选择 | 是 | 全部/包含/不包含 + 多选 |
| 发布品牌 | 多级选择 | 是 | Tecno, Infinix, itel |
| 发布机型 | 多级选择 | 是 | X6841_H6941... |
| 内测机型 | 多级选择 | 是 | 同上 |
| 适用安卓版本 | 多级选择 | 是 | Android 11-16 |
| 适用tOS版本 | 多级选择 | 是 | tOS 15.2.0... |
| 是否过滤印度 | radio | 是 | 是/否 |
| 是否PA应用更新 | radio | 是 | 是/否 |
| 灰度量级 | 数字 | 条件 | 1-100000/天 |
| 生效时间 | 时间范围 | 条件 | |

### 3.2 所需物料 (多语言)

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| 应用名称 | 文本 | 是 | |
| 一句话描述 | 多行 | 是 | |
| 产品详情 | 多行 | 是 | |
| 更新说明 | 多行 | 是 | |
| 关键词 | 多选 | 是 | 1-5个 |
| 应用图标 | 图片 | 是 | 1:1, ≥180x180px |
| 置顶大图 | 图片 | 是 | 1080x594px, ≤2MB |
| 详情截图 | 图片 | 是 | 3-5张, ≤2MB/张 |
| 是否GP上架 | radio | 是 | 是时需填写GP链接 |

---

## 4. 技术架构

### 4.1 技术栈
- **前端**: React + TypeScript + Tailwind CSS
- **后端**: Node.js + Express + SQLite/Prisma
- **部署**: Vercel

### 4.2 文件结构
```
独立三方应用发布系统/
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── hooks/
│   │   └── ...
│   └── package.json
├── backend/
│   ├── src/
│   │   ├── routes/
│   │   ├── controllers/
│   │   └── ...
│   └── package.json
└── README.md
```

---

## 5. 实施计划

### Phase 1: 基础框架 (迭代1-2)
- [ ] 项目初始化
- [ ] 基础页面结构
- [ ] 路由配置

### Phase 2: 核心功能 (迭代3-5)
- [ ] 申请列表
- [ ] 待办卡片
- [ ] 看板

### Phase 3: 详情页 (迭代6-8)
- [ ] 流程单详情
- [ ] APK卡片管理
- [ ] 7节点流水线

### Phase 4: 完善优化 (迭代9+)
- [ ] 历史记录
- [ ] 搜索过滤
- [ ] 响应式适配

---

**文档版本**: v1.0  
**创建时间**: 2026-02-28  
**产品负责人**: AI助手
